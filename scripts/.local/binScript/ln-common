#!/usr/bin/bash

# 检查参数数量
if [ $# -lt 1 ]; then
    echo "Usage: $0 <source_directory> [target_directory]"
    exit 1
fi

src_dir="$1"
tgt_dir="${2:-.}"  # 如果没有提供第二个参数，则使用当前目录

# 检查源目录是否存在
if [ ! -d "$src_dir" ]; then
    echo "Error: Source directory '$src_dir' does not exist."
    exit 1
fi

# 创建目标目录如果不存在
mkdir -p "$tgt_dir"

# 遍历源目录下的所有文件并创建软链接
for file in "$src_dir"/*; do
    if [ -f "$file" ] || [ -d "$file" ]; then
        ln -s "$file" "$tgt_dir"
    fi
done

echo "Soft links created successfully in '$tgt_dir'."
